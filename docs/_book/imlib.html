
<!DOCTYPE HTML>
<html lang="">
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>IMLib &#xB7; GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="&#x63D0;&#x4F9B;&#x878D;&#x4E91; Web &#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x76F8;&#x5173;&#x5E2E;&#x52A9;&#x548C;&#x6307;&#x5357;&#x3002;">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="style/website.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="rtc-sdk.html">
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1">
            
                <span>
            
                    
                    RTC SDK
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1.1" data-path="imlib.html">
            
                <a href="imlib.html">
            
                    
                    IMLib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Open RTC Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3">
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.3.1" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    initialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.2" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    EventHandler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.3" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Set parameter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.4" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Join
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.5" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Leave
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.6" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Get the local stream
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.7" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Get the remote stream
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.8" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Create a local video view
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.9" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Create a remote video view
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.10" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Turn the microphone off / on
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.11" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Turn the local camera off / on
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.12" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Turn remote sound off / on
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.13" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Turn off the local media stream
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.14" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Request whiteboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.15" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Query whiteboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.16" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Start screen sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.17" data-path="rtc-sdk.html">
            
                <a href="rtc-sdk.html#">
            
                    
                    Stop screen sharing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2">
            
                <span>
            
                    
                    CallLib
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="./">
            
                <a href="./#introduction">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="./">
            
                <a href="./#open-rtc-services">
            
                    
                    Open RTC Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="./">
            
                <a href="./#network">
            
                    
                    Network
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="./">
            
                <a href="./#browser">
            
                    
                    Browser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="./">
            
                <a href="./#http">
            
                    
                    HTTP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="./">
            
                <a href="./#version">
            
                    
                    Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="./">
            
                <a href="./#call-process">
            
                    
                    CallLib Process
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="./">
            
                <a href="./#integration">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="./">
            
                <a href="./#setting-parameter">
            
                    
                    Setting Parameter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="./">
            
                <a href="./#init-calllib">
            
                    
                    Initialize CallLib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="./">
            
                <a href="./#register-video">
            
                    
                    Register Video Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="./">
            
                <a href="./#register-command">
            
                    
                    Register Command Monitor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="./">
            
                <a href="./#setting-resolution">
            
                    
                    Setting Resolution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="./">
            
                <a href="./#call">
            
                    
                    Call
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="./">
            
                <a href="./#accept">
            
                    
                    Accept
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="./">
            
                <a href="./#invite">
            
                    
                    Invite
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="./">
            
                <a href="./#hungup">
            
                    
                    Hangup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.18" data-path="./">
            
                <a href="./#reject">
            
                    
                    Reject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.19" data-path="./">
            
                <a href="./#mute">
            
                    
                    Mute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.20" data-path="./">
            
                <a href="./#unmute">
            
                    
                    Unmute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.21" data-path="./">
            
                <a href="./#video2audio">
            
                    
                    Video To Audio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.22" data-path="./">
            
                <a href="./#audio2video">
            
                    
                    Audio To Video
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.23" data-path="./">
            
                <a href="./#start-screen-share">
            
                    
                    Start Screen Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.24" data-path="./">
            
                <a href="./#stop-screen-share">
            
                    
                    Stop Screen Share
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.25" data-path="./">
            
                <a href="./#whiteboard">
            
                    
                    Whiteboard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.26">
            
                <span>
            
                    
                    MessageType
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.26.1" data-path="./">
            
                <a href="./#invitemessage">
            
                    
                    InviteMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.26.2" data-path="./">
            
                <a href="./#hungupmessage">
            
                    
                    HungupMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.26.3" data-path="./">
            
                <a href="./#ringingmessage">
            
                    
                    RingingMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.26.4" data-path="./">
            
                <a href="./#acceptmessage">
            
                    
                    AcceptMessage
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.27" data-path="./">
            
                <a href="./#reason">
            
                    
                    Reason
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    

    <li>
        
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".">IMLib</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="web-sdk-development-guide">Web SDK development guide</h1>
<h2 id="introduction-to-features">Introduction to features</h2>
<p>The RongCloud Web IM SDK version has been improved in many aspects. Here are a few descriptions of the features of SDK product:</p>
<p><strong> Light and stable: </strong></p>
<ul>
<li>SDK is developed using the TypeScript language with clear structure and robustness</li>
<li>The instant messaging library is small, only about 100 KB</li>
<li>The extended function is loaded as demanded and supports voice playback and Emoji libraries</li>
</ul>
<p><strong> Rich functions: </strong></p>
<ul>
<li>Support multiple page connection</li>
<li>Support conversation list roaming</li>
<li>Support chat history roaming</li>
</ul>
<p><strong> Compatibility: </strong></p>
<ul>
<li>Compatible with various environments: IE6 - IE11, Chrome, Firefox, Safari, Edge, QQ browser, WeChat browser, Electron, Android browser 2.3.6 and above</li>
<li>Support two types of connection: WebSocket and HTTP Long Polling</li>
<li>Support AMD and CMD</li>
</ul>
<p><strong> Expansibility:  </strong></p>
<ul>
<li>Support custom messages</li>
<li>Support custom stickers</li>
<li>Support custom saving modes</li>
</ul>
<p><strong> Provide an open source chat interface: </strong></p>
<ul>
<li>Provide open source Web IM and Desktop Demo</li>
</ul>
<h2 id="preparation-in-early-stage">Preparation in early stage</h2>
<h3 id="application-creation">Application creation</h3>
<p>Each app provides a production environment and a development environment whose functions of are completely consistent and whose data are completely isolated. They have their own App Key/Secret and App Key respectively, in which Secret is the identity necessary for the RongCloud SDK to connect to the server. Please do not leak it.</p>
<p>Before the App is finally launched, use the development environment for development testing. The App Key/Secret of the production environment can be obtained after the application for launching is passed and launching is available after replacement.</p>
<h2 id="import-sdk">Import SDK</h2>
<p><strong> Latest version: </strong></p>
<pre class="language-"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http(s)://cdn.ronghub.com/RongIMLib-2.3.3.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p><strong> Example&#xFF1A; </strong></p>
<p><code>Web SDK Demo</code>&#xFF1A;<code>https://rongcloud.github.io/websdk-demo</code></p>
<p><code>Web SDK API</code>&#xFF1A;<code>https://rongcloud.github.io/websdk-demo/api-test.html</code></p>
<h2 id="typescript-support">TypeScript Support</h2>
<p>Download RongIMLib-2.3.3.d.ts locally:<code>http://cdn.ronghub.com/RongIMLib-2.3.3.d.ts</code></p>
<pre class="language-"><code>/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>reference</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>path/RongIMLib-2.3.3.d.ts<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
module RongIM {
  export class Client {
    static init(params: any): void{
      var RongIMClient = RongIMLib.RongIMClient;
      RongIMClient.init(&apos;appkey&apos;);
      // For more reference, please refer to : http://www.rongcloud.cn/docs/web_api_demo.html
    }
  }
}
</code></pre><h2 id="sdk-integration">SDK integration</h2>
<h3 id="obtain-token">Obtain Token</h3>
<p>Token is the identity of current user connected to RongCloud on your APP. Before you connect to RongCloud server, you need to request Token via your App Server. Your App Server obtains Token through RongCloud Server API and returns it to your client. The client get the Token to connect to RongCloud server.</p>
<h3 id="initialize-the-sdk">Initialize the SDK</h3>
<p>Initialization requires the developer background to create a new application to acquire AppKey and Token. Initialization code:</p>
<pre class="language-"><code class="lang-js">RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>appkey<span class="token punctuation">,</span><span class="token punctuation">[</span>dataAccessProvider<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>options<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p>AppKey: the unique identity of the application.</p>
<p>Token: the unique identity of the user.</p>
<pre class="language-"><code class="lang-js">RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">&quot;appkey&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="set-monitor">Set Monitor</h3>
<p>1&#x3001;A state monitor must be set before connecting the RongCloud server. The sample code is as follows:</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// Set the connection state for monitoring</span>
 <span class="token comment">// Connect state monitor</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">setConnectionStatusListener</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      onChanged<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">CONNECTED</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;successfully&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">CONNECTING</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;connecting&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">DISCONNECTED</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;disconnected&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">KICKED_OFFLINE_BY_OTHER_CLIENT</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;log in on other devices&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">DOMAIN_INCORRECT</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;incorrect domain name&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionStatus<span class="token punctuation">.</span><span class="token constant">NETWORK_UNAVAILABLE</span><span class="token punctuation">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;network unavailable&apos;</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Message monitor</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">setOnReceiveMessageListener</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token comment">// messages received</span>
      onReceived<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// Determine the message type</span>
      <span class="token keyword">switch</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span>messageType<span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>TextMessage<span class="token punctuation">:</span>
          <span class="token comment">// message.content.content =&gt; content of the message</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>VoiceMessage<span class="token punctuation">:</span>
          <span class="token comment">//  Preload the sound</span>
          <span class="token comment">// message.content.content base64 code with a format of AMR</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>ImageMessage<span class="token punctuation">:</span>
          <span class="token comment">// message.content.content =&gt; thumbnail of an image base64.</span>
          <span class="token comment">// message.content.imageUri =&gt; Original image URL.</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>DiscussionNotificationMessage<span class="token punctuation">:</span>
          <span class="token comment">// message.content.extension =&gt; Members of the discussion group.</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>LocationMessage<span class="token punctuation">:</span>
          <span class="token comment">// message.content.latiude =&gt; latitude.</span>
          <span class="token comment">// message.content.longitude =&gt; longitude.</span>
          <span class="token comment">// message.content.content =&gt; location image base64.</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>RichContentMessage<span class="token punctuation">:</span>
          <span class="token comment">// message.content.content =&gt; content of the text message.</span>
          <span class="token comment">// message.content.imageUri =&gt;image base64.</span>
          <span class="token comment">// message.content.url =&gt; Original image URL.</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>InformationNotificationMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>ContactNotificationMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>ProfileNotificationMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>CommandNotificationMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>CommandMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMClient<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>UnknownMessage<span class="token punctuation">:</span>
          <span class="token comment">// do something...</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token comment">// do something...</span>
      <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="connect-to-server">Connect to server</h3>
<p>RongCloud must be connected after implementing <code>RongIMLib.RongIMClient.init(appkey);</code> and be called after all methods other than monitoring has been successfully connected.</p>
<p>By default, only one page connection is supported, and one page can only be init once. Turn on &quot;multi-device message synchronization&quot; to support multi-page connection.</p>
<pre class="language-"><code class="lang-js"> RongIMClient<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connect successfully.&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onTokenIncorrect<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;invalid Token&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionState<span class="token punctuation">.</span><span class="token constant">UNACCEPTABLE_PAROTOCOL_VERSION</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;unacceptable protocol version&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionState<span class="token punctuation">.</span><span class="token constant">IDENTIFIER_REJECTED</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;incorrect appkey&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ConnectionState<span class="token punctuation">.</span><span class="token constant">SERVER_UNAVAILABLE</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unavailable server&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="reconnect">Reconnect</h3>
<pre class="language-"><code class="lang-js">    <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token punctuation">{</span>
        onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Reconnect successfully.&quot;</span> <span class="token operator">+</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        onTokenIncorrect<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;invalid Token&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>errorcode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// false by default, select true to enable automatic reconnection as a required parameter</span>
        auto<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// Retry frequency  [100, 1000, 3000, 6000, 10000, 18000] in milliseconds, optional</span>
        url<span class="token punctuation">:</span> <span class="token string">&apos;cdn.ronghub.com/RongIMLib-2.2.6.min.js&apos;</span><span class="token punctuation">,</span>
        <span class="token comment">// Network sniffing address [http(s)://]cdn.ronghub.com/RongIMLib-2.2.6.min.js optional</span>
        rate<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    RongIMClient<span class="token punctuation">.</span><span class="token function">reconnect</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="massage-api">Massage API</h2>
<h3 id="send-a-message">Send a message</h3>
<p>Messages must be sent after a successful connection to the RongCloud server, with a maximum frequency of up to 5 messages per second.</p>
<p>RongCloud supports sending text messages, image messages, voice messages, file messages, geo-location messages and custom messages to the private chats, group chats and chat rooms. RongCloud Web SDK does not provide functions of audio recording and transcoding, and the developer need to record and transcode voice messages on their own and send them through the RongCloud&apos;s built-in voice messages.</p>
<p>1.Text message</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>TextMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>content<span class="token punctuation">:</span><span class="token string">&quot;hello RongCloud!&quot;</span><span class="token punctuation">,</span>extra<span class="token punctuation">:</span><span class="token string">&quot;extra message&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
        info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span> <span class="token punctuation">:</span>
        info <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Send pushData[notification] to Android or iOS as follows:</p>
<pre class="language-"><code class="lang-js"> <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>TextMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>content<span class="token punctuation">:</span><span class="token string">&quot;hello RongCloud!&quot;</span><span class="token punctuation">,</span>extra<span class="token punctuation">:</span><span class="token string">&quot;extra message&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
 <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
 <span class="token keyword">var</span> pushData <span class="token operator">=</span> <span class="token string">&quot;your pushInfo&quot;</span><span class="token punctuation">;</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span><span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> pushData
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The usages of all the following message types related to pushData are as follows and will not be repeated.</p>
<p>2.Image message</p>
<p>For the uploading of images, please refer to: Upload plug-ins</p>
<pre class="language-"><code class="lang-js"> <span class="token comment">/*
 Convert the image into FileReader or canvas that has access to HTML5, or upload it to the background for conversion.

Precautions:
 1. The thumbnail must be a JPG of base64 code.
 2. Without prefix.
 3. The recommended size should not exceed 100 K.
    */</span>
  <span class="token keyword">var</span> base64Str <span class="token operator">=</span> <span class="token string">&quot;thumbnail of base64 format&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> imageUri <span class="token operator">=</span> <span class="token string">&quot;image URL&quot;</span><span class="token punctuation">;</span><span class="token comment">// Upload to the URL of file server.</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>ImageMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>content<span class="token punctuation">:</span>base64Str<span class="token punctuation">,</span>imageUri<span class="token punctuation">:</span>imageUri<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token punctuation">:</span>
            info <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3&#x3001;Rich content message</p>
<p>For the uploading of images, please refer to: Upload plug-ins</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token string">&quot;description of rich text message&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> imageUri <span class="token operator">=</span> <span class="token string">&quot;image URL&quot;</span><span class="token punctuation">;</span><span class="token comment">// Upload to the URL of your own server.</span>
  <span class="token keyword">var</span> title <span class="token operator">=</span> <span class="token string">&quot;title of rich text message&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">&quot;URL opened after clicking rich text message &quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>RichContentMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>title<span class="token punctuation">:</span>title<span class="token punctuation">,</span>content<span class="token punctuation">:</span>content<span class="token punctuation">,</span>imageUri<span class="token punctuation">:</span>imageUri<span class="token punctuation">,</span>url<span class="token punctuation">:</span>url<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>4&#x3001;Location message</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> latitude <span class="token operator">=</span> <span class="token string">&quot;latitude&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> longitude <span class="token operator">=</span> <span class="token string">&quot;longitude&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> poi <span class="token operator">=</span> <span class="token string">&quot;description of the location&quot;</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> content <span class="token operator">=</span> <span class="token string">&quot;location thumbnail&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>LocationMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>latitude<span class="token punctuation">:</span> latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">:</span> longitude<span class="token punctuation">,</span> poi<span class="token punctuation">:</span> poi<span class="token punctuation">,</span> content<span class="token punctuation">:</span> content<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>5.Command message</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">&quot;command instruction&quot;</span><span class="token punctuation">;</span><span class="token comment">//It could be an object, data = {cmd:update};</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>CommandMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token punctuation">:</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token punctuation">:</span>
            info <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>6&#x3001;Status message of inputting</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span><span class="token comment">// the status of &quot;inputting&quot;is only displayed in private chat</span>
 <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> msgName <span class="token operator">=</span> <span class="token string">&quot;TextMessage&quot;</span><span class="token punctuation">;</span><span class="token comment">// the type of the message the user is entering VoiceMessage, etc.</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendTypingStatusMessage</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msgName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;overtime&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>7&#x3001;Read notification message</p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> messageUId <span class="token operator">=</span><span class="token string">&quot;the unique Id of the message&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> lastMessageSendTime <span class="token operator">=</span> <span class="token string">&quot;the time of sending the last message&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> type <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span><span class="token comment">// standby, assign a value of 1 by default.</span>
  <span class="token comment">// The above 3 attributes are available in the last message of the conversation.</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>ReadReceiptMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> messageUId<span class="token punctuation">:</span> messageUId<span class="token punctuation">,</span> lastMessageSendTime<span class="token punctuation">:</span> lastMessageSendTime<span class="token punctuation">,</span> type<span class="token punctuation">:</span> type <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;timeout&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>8&#x3001;@ message</p>
<p>Support @ conversation message: RongIMLib.ConversationType.GROUP&#x3001;RongIMLib.ConversationType.DISCUSSION.</p>
<p>Support @ information message: TextMessage&#x3001;ImageMessage&#x3001;VoiceMessage&#x3001;RichContentMessage&#x3001;LocationMessage.</p>
<p>Transmit mode: RongIMClient.getInstance().sendMessage(conversationType,targetId,msg,callback,true);, set the last parameter to true.</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// Group chat</span>
 <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">GROUP</span><span class="token punctuation">;</span>
 <span class="token comment">// Target Id</span>
 <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;groupId&quot;</span><span class="token punctuation">;</span>
 <span class="token comment">// @ message object</span>
 <span class="token keyword">var</span> mentioneds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>MentionedInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// All: RongIMLib.MentionedType.ALL; part: RongIMLib.MentionedType.PART</span>
  mentioneds<span class="token punctuation">.</span>type <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>MentionedType<span class="token punctuation">.</span><span class="token constant">PART</span><span class="token punctuation">;</span>
  <span class="token comment">// The one of @</span>
  mentioneds<span class="token punctuation">.</span>userIdList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>TextMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>content<span class="token punctuation">:</span><span class="token string">&quot;hello RongCloud!&quot;</span><span class="token punctuation">,</span>extra<span class="token punctuation">:</span><span class="token string">&quot;extra message&quot;</span><span class="token punctuation">,</span> mentionedInfo<span class="token punctuation">:</span>mentioneds<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;overtime&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>9&#x3001;File message</p>
<p>For the uploading of files, please refer to: Upload plug-ins</p>
<pre class="language-"><code class="lang-js"> <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&apos;RongIMLib.js&apos;</span><span class="token punctuation">,</span>
      size <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">,</span>
      type <span class="token operator">=</span> <span class="token string">&apos;js&apos;</span><span class="token punctuation">,</span>
      fileUrl <span class="token operator">=</span> <span class="token string">&apos;http://xxxx.xxx.xx/RongIMLib.js&apos;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>FileMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> name<span class="token punctuation">,</span> size<span class="token punctuation">:</span> size<span class="token punctuation">,</span> type<span class="token punctuation">:</span> type<span class="token punctuation">,</span> fileUrl<span class="token punctuation">:</span> fileUrl<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>
  RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;overtime&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
          info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span> <span class="token punctuation">:</span>
          info <span class="token operator">=</span> x<span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="send-group-directed-message">Send group directed message</h3>
<p>This method is used to send a message to some users in a group, and other users will not receive this message. It is recommended to use this function when sending a receipt of message reading status to some users in the group.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> isMentiondMsg <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//whether it is an @message, true for an @ message and false for an ordinary message</span>
 <span class="token keyword">var</span> pushText <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span><span class="token comment">//Push displayed content</span>
 <span class="token keyword">var</span> appData <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token comment">//Push extra message at the time of notification</span>
 <span class="token keyword">var</span> methodType <span class="token operator">=</span> <span class="token keyword">null</span>
 <span class="token keyword">var</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span>
 userIds<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;userId1&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;userId2&apos;</span><span class="token punctuation">]</span><span class="token comment">//user that received the message ID list</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">GROUP</span><span class="token punctuation">;</span> <span class="token comment">//var type of the group chat</span>
  <span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// target Id</span>

<span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>TextMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>content<span class="token punctuation">:</span><span class="token string">&quot;I am a directional message available to only userId1 and userId2&quot;</span> extra<span class="token punctuation">:</span><span class="token string">&quot;extra message&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationtype<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token comment">//message is the message object sent and contains a unique Id of the message returned by the server and the message sending timestamp</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Send successfully&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> info <span class="token operator">=</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">TIMEOUT</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;overtime&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNKNOWN_ERROR</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unknown error&apos;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">REJECTED_BY_BLACKLIST</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;unable to send messages to others when in the blacklist&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_DISCUSSION</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the discussion group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_GROUP</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span><span class="token string">&apos;not in the group&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> RongIMLib<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">NOT_IN_CHATROOM</span><span class="token punctuation">:</span>
            info <span class="token operator">=</span> <span class="token string">&apos;not in the chat room&apos;</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span> <span class="token punctuation">:</span>
            info <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span> <span class="token punctuation">(</span><span class="token string">&apos;fail to send&apos;</span><span class="token operator">+</span>info<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>isMentiondMsg<span class="token punctuation">,</span> pushText<span class="token punctuation">,</span> appData<span class="token punctuation">,</span> methodType<span class="token punctuation">,</span> opts<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="get-the-historical-message-of-one-group-chat">Get the historical message of one group chat</h3>
<p>Circular pulling of the historic message is supported (only when timestrap is null). The specific logic:</p>
<p>Condition: of 45 historical records, 20 are pulled for each time </p>
<p>For the first time, the pulled list has a length of 20 and hasMsg is true. </p>
<p>For the second time, the pulled list has a length of 20 and hasMsg is true. </p>
<p>For the third time, the pulled list has a length of 5 and hasMsg is false. </p>
<p>For the fourth time, the pulled list has a length of 0 and hasMsg is false.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Assign the Id of the one with whom the historic message you want to targetId.</span>
<span class="token keyword">var</span> timestrap <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//Upload null by default. Set the value to 0,timestrap = 0 if you want to acquire the historic message from the beginning.</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// The number of historic messages retrieved per time, ranging from 0 to 20, can be retrieved multiple times</span>
RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHistoryMessages</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span> targetId<span class="token punctuation">,</span> timestrap<span class="token punctuation">,</span> count<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> hasMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// list =&gt; Message array.</span>
    <span class="token comment">// hasMsg =&gt;Are there any historic messages available.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getHistoryMessages:&quot;</span> <span class="token operator">+</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="draft-message">Draft message</h3>
<p>1.Save the draft</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> draft <span class="token operator">=</span> <span class="token string">&quot;draft message&quot;</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">saveTextMessageDraft</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>2.Acquire the draft</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> draft <span class="token operator">=</span> RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTextMessageDraft</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3.Delete the draft</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearTextMessageDraft</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="custom-message">Custom Message</h3>
<p>The following example uses the WebSDK built-in message structure. For custom message structure, please refer to the development guide.</p>
<p>1.Define message type</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> messageName <span class="token operator">=</span> <span class="token string">&quot;PersonMessage&quot;</span><span class="token punctuation">;</span> <span class="token comment">// message name.</span>
<span class="token keyword">var</span> objectName <span class="token operator">=</span> <span class="token string">&quot;s:person&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Built-in name of the message, please follow this format to denominate.</span>
<span class="token keyword">var</span> mesasgeTag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMLib<span class="token punctuation">.</span>MessageTag</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// whether to save the message and count, true true for saving and counting, and false false otherwise.</span>
<span class="token keyword">var</span> prototypes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// attribute name in the message type.</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">registerMessageType</span><span class="token punctuation">(</span>messageName<span class="token punctuation">,</span>objectName<span class="token punctuation">,</span>mesasgeTag<span class="token punctuation">,</span>prototypes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>2.Send a message</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationtype <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span> <span class="token comment">// private chat, select the appropriate message type for the other sessions.</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Assign the Id of the one with whom the historic message you want to targetId.</span>
<span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RongIMClient<span class="token punctuation">.</span>RegisterMessage<span class="token punctuation">.</span>PersonMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&quot;zhang&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3.Receive a message</p>
<p>Reception of a message is consistent with that of other built-in messages. Add a case to the setOnReceiveMessageListener mentioned above to display the message.</p>
<p>For example: case RongIMClient.MessageType.RegisterMessage : dosomething...</p>
<h3 id="message-recall">Message recall</h3>
<p>The server of the message recalling operation has no limit on the time range of recalling, which is determined by the client.</p>
<pre class="language-"><code class="lang-js"><span class="token comment">//recallMessage is the message object that needs to be recalled</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendRecallMessage</span><span class="token punctuation">(</span>recallMessage<span class="token punctuation">,</span> <span class="token punctuation">{</span>
onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showResult</span><span class="token punctuation">(</span><span class="token string">&quot;successfully recalled&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
onError<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>errorCode<span class="token punctuation">,</span>message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">showResult</span><span class="token punctuation">(</span><span class="token string">&quot;failed to recall&quot;</span><span class="token punctuation">,</span> message<span class="token punctuation">,</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="clear-the-historic-message-of-the-server">Clear the historic message of the server</h3>
<pre class="language-"><code class="lang-js"><span class="token comment">/**
 conversationType: type of the conversation

targetId: target Id

 timestamp: time point of deletion, message.sentTime &lt;= message of the timestamp will be deleted (message: sentTime attribute in real-time or historic messages sent and received)
 Range of timestamp:  timestamp &gt;=0 and timestamp &lt;= the sentTime of the last message in the current conversation
 */</span>
 <span class="token keyword">var</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
  conversationType<span class="token punctuation">:</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">,</span> <span class="token comment">// type of the conversation</span>
  targetId<span class="token punctuation">:</span> <span class="token string">&apos;dPd90Fkja&apos;</span><span class="token punctuation">,</span> <span class="token comment">// target Id</span>
  timestamp<span class="token punctuation">:</span> <span class="token number">1513308018122</span> <span class="token comment">// time point of deletion</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearRemoteHistoryMessages</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Successfully deleted</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Please check: is the cloud saving available for messages of a single group chat</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="conversation-interface">Conversation interface</h2>
<h3 id="conversation-type">Conversation type</h3>
<p>1.RongIMLib.ConversationType.PRIVATE :  two-person private chat with an enum value of 1.</p>
<p>2.RongIMLib.ConversationType.DISCUSSION: discussion group conversation with an enum value of 2.</p>
<p>3.RongIMLib.ConversationType.GROUP: group conversation with an enum value of 3.</p>
<p>4.RongIMLib.ConversationType.CHATROOM: chat room conversation with an enum value of 4.</p>
<p>5.RongIMLib.ConversationType.CUSTOMER_SERVICE: customer service conversation with an enum value of 5.</p>
<p>6.RongIMLib.ConversationType.SYSTEM: system message with an enum value of 6.</p>
<p>7.RongIMLib.ConversationType.APP_PUBLIC_SERVICE: public account (followed by default) conversation with an enum value of 7.</p>
<p>8.RongIMLib.ConversationType.PUBLIC_SERVICE: public account (followed privately) conversation with an enum value of 8.</p>
<h3 id="get-the-conversation-list">Get the conversation list</h3>
<pre class="language-"><code class="lang-js">RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConversationList</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  list =&gt; Collection of conversation list.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// do something...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In the conversation list, the data structure of each conversation is as follows:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">conversationTitle</td>
<td style="text-align:left">Conversation title.</td>
</tr>
<tr>
<td style="text-align:left">conversationType</td>
<td style="text-align:left">conversation type: 1-private chat, 3-group, 4-chat room, 5-customer service, 6-system, 7-public service of App, 8-common public service</td>
</tr>
<tr>
<td style="text-align:left">latestMessageId</td>
<td style="text-align:left">The last message Id in the conversation.</td>
</tr>
<tr>
<td style="text-align:left">notificationStatus</td>
<td style="text-align:left">Whether to enable Do Not Disturb (DND)</td>
</tr>
<tr>
<td style="text-align:left">objectName</td>
<td style="text-align:left">Message identification for the last message in the conversation, with the RongCloud built-in message beginning with &quot;RC:&quot;. Table for the Type of RongCloud Built-in Messages</td>
</tr>
<tr>
<td style="text-align:left">sentStatus</td>
<td style="text-align:left">10-sending, 20-fail to send, 30-sent, 40-received, 50-read, 60-destroyed.</td>
</tr>
<tr>
<td style="text-align:left">sentTime</td>
<td style="text-align:left">Time of sending the last message in the conversation to RongCloud server side.</td>
</tr>
<tr>
<td style="text-align:left">targetId</td>
<td style="text-align:left">It could be the user Id, 3-group Id, 4-chat room Id, 5-customer service Id, 6-system conversation Id, 7-pubic account of the App, 8-common public account Id</td>
</tr>
<tr>
<td style="text-align:left">unreadMessageCount</td>
<td style="text-align:left">The number of unread messages in the current conversation.</td>
</tr>
<tr>
<td style="text-align:left">latestMessage</td>
<td style="text-align:left">The last message in the conversation.</td>
</tr>
</tbody>
</table>
<p>The structure of the latestMessage  in the conversation list is as follows:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">content</td>
<td style="text-align:left">Message content.</td>
</tr>
<tr>
<td style="text-align:left">conversationType</td>
<td style="text-align:left">conversation type: 1-private chat, 3-group, 4-chat room, 5-customer service, 6-system, 7-public service of App, 8-common public service</td>
</tr>
<tr>
<td style="text-align:left">objectName</td>
<td style="text-align:left">Message identification, with the RongCloud built-in message beginning with &quot;RC:&quot;. Table for the Type of RongCloud Built-in Messages</td>
</tr>
<tr>
<td style="text-align:left">messageDirection</td>
<td style="text-align:left">Message direction, 1 for the message sent, 2 for the message received.</td>
</tr>
<tr>
<td style="text-align:left">messageId</td>
<td style="text-align:left">Locally generated message Id.</td>
</tr>
<tr>
<td style="text-align:left">sentStatus</td>
<td style="text-align:left">10-sending, 20-fail to send, 30-sent, 40-received, 50-read, 60-destroyed.</td>
</tr>
<tr>
<td style="text-align:left">receivedTime</td>
<td style="text-align:left">The local time at which the message is received by the App</td>
</tr>
<tr>
<td style="text-align:left">senderUserId</td>
<td style="text-align:left">Sender Id</td>
</tr>
<tr>
<td style="text-align:left">sentTime</td>
<td style="text-align:left">Time of sending the message at RongCloud server side.</td>
</tr>
<tr>
<td style="text-align:left">targetId</td>
<td style="text-align:left">Target Id</td>
</tr>
<tr>
<td style="text-align:left">messageType</td>
<td style="text-align:left">For details of the message type, please refer to message type description.</td>
</tr>
<tr>
<td style="text-align:left">messageUId</td>
<td style="text-align:left">The unique identification of the message at the RongCloud server side. The message could be recalled through messageUId.</td>
</tr>
<tr>
<td style="text-align:left">offLineMessage</td>
<td style="text-align:left">Whether it is an offline message, true for an offline message and false otherwise.</td>
</tr>
</tbody>
</table>
<h3 id="modify-the-conversation">Modify the conversation</h3>
<p>This method can modify the information in the conversation, and fill in the user information or conversation Title, etc.</p>
<p>1.If local storage is not used, you must first execute getConversationList and have this conversation to make this method effective.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConversation</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span><span class="token punctuation">{</span>
        onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>con<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              con<span class="token punctuation">.</span>conversationTitle<span class="token operator">=</span><span class="token string">&quot;Title of the conversation&quot;</span><span class="token punctuation">;</span>
              RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateConversation</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token function">consoleInfo</span><span class="token punctuation">(</span><span class="token string">&quot;updateConversation Success!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ol>
<li>Get the Conversation</li>
</ol>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConversation</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span><span class="token punctuation">{</span>
        onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3.Remove the conversation</p>
<pre class="language-"><code class="lang-js">RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeConversation</span><span class="token punctuation">(</span>RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">,</span><span class="token string">&quot;1002&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>bool<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">//Conversation is successfully deleted.</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token comment">//error =&gt; Delete the error code of the conversation</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>4.Clear conversations by conversation type:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationTypes <span class="token operator">=</span> <span class="token punctuation">[</span>RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">,</span>RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">GROUP</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearConversations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//Conversation is successfully deleted</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error =&gt; Delete the error code of the conversation.</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>conversationTypes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>5.Clear all conversations:</p>
<pre class="language-"><code class="lang-js">RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearConversations</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//Conversation is successfully deleted</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// error =&gt; Delete the error code of the conversation.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="unread-message-count">Unread message count</h3>
<p>If the browser does not support WebStorage and you are not using local storage, the number of unread messages will not be saved, and the number of unread messages will be unavailable after the browser page refreshes.</p>
<p>1.Get the total number of unread messages for all conversations</p>
<pre class="language-"><code class="lang-js">RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTotalUnreadCount</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// count =&gt; The total number of unread messages for all conversations</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// error =&gt; the error code of the total number of unread messages</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>2.Get the total number of unread messages for multiple conversations</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationTypes <span class="token operator">=</span> <span class="token punctuation">[</span>RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">,</span>RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">DISCUSSION</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getConversationUnreadCount</span><span class="token punctuation">(</span>conversationTypes<span class="token punctuation">,</span><span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// count =&gt; The total number of unread messages for multiple conversations</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// error =&gt; the error code of the total number of unread messages for multiple conversations</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3.Get the total number of unread messages for specified conversations</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
RongIMLib<span class="token punctuation">.</span>RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUnreadCount</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span><span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// count =&gt; The total number of unread messages for specified conversations</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// error =&gt; Acquire the error code of the total number of unread messages for specified conversations</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>4.clear unread message count</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> conversationType <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>ConversationType<span class="token punctuation">.</span><span class="token constant">PRIVATE</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> targetId <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearUnreadCount</span><span class="token punctuation">(</span>conversationType<span class="token punctuation">,</span>targetId<span class="token punctuation">,</span><span class="token punctuation">{</span>
    onSuccess<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// Unread messages are successfully emptied.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// error =&gt; Empty the error code of the unread message.</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="group">Group</h2>
<p>The group relationship and group list will be maintained by you App. All group operations in the client need to request your App Server. Your App Server can conduct the management and control according to its own logic, and then perform the group operations through the Server API interface. The results will be returned to the client.</p>
<p>The flow for the group operation of the client is shown below.</p>
<p><strong> Create the group </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group creation request to its own application server.
  App Server -&gt; RongCloud Server: after the authorization succeeds, synchronously create the group in the RongCloud server. \n /group/create
  RongCloud Server -&gt; App Server: the creation is successful with returning the status.
  App Server -&gt; App: the creation succeeds and the group information can be sent.
</canvas>

<p><strong> Join the group </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group entering request to its own application server.
  App Server -&gt; RongCloud Server: after the authorization succeeds, call the RongCloud server to enter the group interface. \n /group/join
  RongCloud Server -&gt; App Server: the entering is successful with returning the status.
  App Server -&gt; App: the entering succeeds and the user can send the information in the group.
</canvas>

<p><strong> Quit the group </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group quit request to its own application server.
  App Server -&gt; RongCloud Server: after the authorization succeeds, call the RongCloud server to quit the group interface. \n /group/quit
  RongCloud Server -&gt; App Server: the quit is successful with returning the status.
  App Server -&gt; App: quit the group and the user will not receive the information of such group.
</canvas>

<p><strong> Dissmis the group </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group dissolution request to its own application server.
  App Server -&gt; RongCloud Server: after the authorization succeeds, call the RongCloud server to dissolve the group interface. \n /group/dismiss
  RongCloud Server -&gt; App Server: the dissolution is successful with returning the status.
  App Server -&gt; App: the group is successfully dissolved.
</canvas>

<p><strong> Set the group information </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group information setting request to its own application server.
  App Server -&gt; RongCloud Server: after the authorization succeeds, call the RongCloud server to set the group interface. \n /group/refresh
  RongCloud Server -&gt; App Server: the setting is successful with returning the status.
  App Server -&gt; App: the group information has been set successfully.
</canvas>

<p><strong> Get the group member list </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; App Server: App initiates a group member inquiry to its own application server.
  App Server -&gt; App: it is successful with returning the member information.
</canvas>

<p><strong> Get the group list </strong></p>
<canvas id="canvasSequenced_sendImageMessage" width="800" sequenced="">
  App -&gt; RongCloud Server: connect the RongCloud server  connect
  RongCloud Server -&gt; App: the connection is successful with returning the status information.
  App --&gt; App Server: request to obtain the group list
  App Server -&gt; RongCloud Server: in case of change, it is necessary to synchronize the group information to the RongCloud server.
  RongCloud Server -&gt; App Server: it is successful with returning the status information.
  App Server --&gt; App: it is successful with returning the group list.
</canvas>

<h2 id="chat-room">Chat Room</h2>
<p>1.Join</p>
<pre class="language-"><code class="lang-js"> <span class="token keyword">var</span> chatRoomId <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// chat room Id.</span>
 <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">// Pull up to 50 recent chats.</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">joinChatRoom</span><span class="token punctuation">(</span>chatRoomId<span class="token punctuation">,</span> count<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Joined the chat room successfully.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//Failed to join the chat room</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>2.Quti</p>
<pre class="language-"><code class="lang-js"> <span class="token keyword">var</span> chatRoomId <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// chat room Id.</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">quitChatRoom</span><span class="token punctuation">(</span>chatRoomId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Exited the chat room successfully.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Failed to exit the chat room.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3.Get information</p>
<pre class="language-"><code class="lang-js"> <span class="token keyword">var</span> chatRoomId <span class="token operator">=</span> <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">;</span> <span class="token comment">// chat room Id.</span>
 <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//Acquire the number of persons in the chat room (ranging from 0 to 20)</span>
 <span class="token keyword">var</span> order <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>GetChatRoomType<span class="token punctuation">.</span><span class="token constant">REVERSE</span><span class="token punctuation">;</span><span class="token comment">//Sort order</span>
 RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChatRoomInfo</span><span class="token punctuation">(</span>chatRoomId<span class="token punctuation">,</span> count<span class="token punctuation">,</span> order<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  onSuccess<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>chatRoom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// chatRoom =&gt; Chat room information</span>
      <span class="token comment">// chatRoom.userInfos =&gt; Return to the chat room member.</span>
      <span class="token comment">// chatRoom.userTotalNums =&gt;Current total number of members in the chat room.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  onError<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Failed to get chat room information.</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>4.Set the start time of the get historical message</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> chatRoomId <span class="token operator">=</span> <span class="token string">&apos;xxxx&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> timestamp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//Time to start the retrieving of the historic message (millisecond)</span>
RongIMClient<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setChatroomHisMessageTimestamp</span><span class="token punctuation">(</span>chatRoomId<span class="token punctuation">,</span> timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="configuration">Configuration</h2>
<h2 id="maintenance-of-information-of-users-groups-and-chat-rooms">Maintenance of information of users, groups and chat rooms</h2>
<p>RongCloud provides instant messaging service and does not establish a parallel user system outside the App. The specific information of users and groups and details of the chat room all need to be maintained on the App Server and provided on the end with services such as inquiry and modification. Finally, they can be synchronized with RongCloud in time. The following is an integrated processing method.</p>
<p><strong> The logic associated with users, groups, and chat rooms when using the RongCloud service is as follows: </strong></p>
<ol>
<li><p>RongCloud needs the information of users, groups and chat rooms associated with the message. Details are as follows</p>
<p>The App Server maintains all user information and requests the registered users of RongCloud(provide id, name, and portrait). The id is used for messaging, and the name is used push. This interface also provides a refresh method.</p>
<p>App Server maintains the information of groups and members. In other words, the creation of a group and maintenance of group members shall be synchronized to RongCloud after being completed in the App Server, limited to the information of the group (group Id) and group members (member id), both of which are available for messaging. The message is sent to the group id, and the group member can get the corresponding message.</p>
</li>
<li><p>The user creates and joins a chat room by calling the SDK corresponding methods on the end.</p>
</li>
<li><p>Through the link server, messaging, etc., RongCloud carries relevant ids (user id and group id) to each end which requests the App Server to obtain the detailed information (user name, portrait, group name, group portrait, group member information, and other business-related data such as position and rank required by the business) through id.</p>
<p>The user uses Token to link RongCloud and return to the id of current user to obtain details of the logged in user.</p>
<p>When the message is received, conversationType, targetId and senderUserId are available in the message body. Details of the sender of a private chat (conversationType = 1) can be obtained by userId = senderUserId, information of the group of a group chat (conversationType = 3) can be obtained by groupId = targetId. You may directly return to the group and member information or request access separately, depending on the interface design.</p>
</li>
<li><p>When a message of the chat room is received (conversationType = 4), you may obtain the sender id through senderUserId, the chatroom id through targetId, and then obtain the list of chatroom members to process the corresponding user information logic.</p>
</li>
</ol>
<p>Finally, a code reference for a specific implementation is provided:<code>https://github.com/rongcloud/websdk-demo/blob/master/user-group.js</code></p>
<h2 id="sticker-library">Sticker library</h2>
<h3 id="sticker-library-trackback-address">Sticker library trackback address</h3>
<p>Obtain the official sticker library (current version is 2.2.7) :</p>
<pre class="language-"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http(s)://cdn.ronghub.com/RongEmoji-2.2.7.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>Code example: <code>https://rongcloud.github.io/websdk-demo/emoji.html</code></p>
<h3 id="how-to-use-the-sticker-library">How to use the sticker library</h3>
<ol>
<li>Compatible with sticker libraries of version 2.2.6 and below</li>
<li>By default, 128 Emoji stickers are supported and custom extension of Emoji is supported</li>
<li><p>Range of support:</p>
<p>(1) Mainstream desktop browsers such as IE7+, Edge, Chrome 30+, Firefox 30+ and Safari 10+</p>
<p>(2) Chrome browser and Wechat browser for Android 4.4+ systems</p>
<p>(3) Safari browser and WeChat browser for iPhone iOS 8.0+</p>
</li>
</ol>
<h4 id="1&#x3001;emoji-initialization">1&#x3001;Emoji initialization</h4>
<p><strong> Initialize with default parameters </strong></p>
<pre class="language-"><code class="lang-js">RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong> Initialize by configuration </strong></p>
<pre class="language-"><code class="lang-js"> <span class="token comment">// Refer to http://unicode.org/emoji/charts/full-emoji-list.html for sticker information</span>
 <span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
   Size<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token comment">// size, 24 by default, recommend 18 - 58</span>
   url<span class="token punctuation">:</span> <span class="token string">&quot;//f2e.cn.ronghub.com/sdk/emoji-48.png&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Emoji background image</span>
   lang<span class="token punctuation">:</span> <span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Emoji language corresponding to the name, default zh</span>
    <span class="token comment">// expand the sticker</span>
   extension<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     dataSource<span class="token punctuation">:</span> <span class="token punctuation">{</span>
       u1F914<span class="token punctuation">:</span> <span class="token punctuation">{</span>
         en<span class="token punctuation">:</span> <span class="token string">&quot;thinking face&quot;</span><span class="token punctuation">,</span> <span class="token comment">// English name</span>
         zh<span class="token punctuation">:</span> <span class="token string">&quot;think&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Chinese name</span>
         tag<span class="token punctuation">:</span> <span class="token string">&quot;&#x1F600;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// original Emoji</span>
         position<span class="token punctuation">:</span> <span class="token string">&quot;0 0&quot;</span> <span class="token comment">//  coordinates of position on the background image</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token comment">// new Emoji background image url</span>
     url<span class="token punctuation">:</span> <span class="token string">&quot;//cdn.ronghub.com/thinking-face.png&quot;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">;</span>
 RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="2&#x3001;obtain-emoji-list">2&#x3001;Obtain Emoji list</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> list <span class="token operator">=</span> RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
<span class="token comment">/*
list =&gt; [
    {
        unicode: &apos;u1F600&apos;,
        emoji: &quot;&#x1F600;&quot;,
        node: span,
        symbol: &quot;[smiling broadly]&quot;
    },
    ...
]
*/</span>
</code></pre>
<h4 id="3&#x3001;transfer-emoji-to-name">3&#x3001;Transfer Emoji to name</h4>
<p>When original Emoji rendering is not supported, corresponding names can be displayed for message input</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;&#x1F600;&#x1F601;test Emoji&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Convert the original Emoji in the message to its corresponding name</span>
RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">emojiToSymbol</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;[smiling broadly][grinning]test Emoji&quot;</span>
</code></pre>
<h4 id="4&#x3001;transfer-name-into-emoji">4&#x3001;Transfer name into Emoji</h4>
<p>Original Emoji characters must be used in the message body when sending a message</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;[smiling broadly][grinning]test Emoji&quot;</span>
<span class="token comment">// Convert the Emoji in the message to the original Emoji</span>
RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">symbolToEmoji</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;&#x1F600;&#x1F601;test Emoji&quot;</span>
</code></pre>
<h4 id="5&#x3001;transfer-emoji-to-html">5&#x3001;Transfer Emoji to HTML</h4>
<p>When the Web SDK receives the message, the original Emoji characters in the message body will be decoded to the corresponding Unicode code, which requires the calling of a transformation mode for correct display</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;\uf600test Emoji&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Convert the original Emoji (including Unicode) in the message to HTML</span>
RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">emojiToHTML</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;&lt;span class=&apos;rong-emoji-content&apos; name=&apos;[smiling broadly]&apos;&gt;&#x1F600;&lt;/span&gt;test Emoji&quot;</span>
</code></pre>
<h4 id="6&#x3001;transfer-name-into-html">6&#x3001;Transfer name into HTML</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;[grinning]test Emoji&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// Convert the Emoji in the message to HTML</span>
RongIMLib<span class="token punctuation">.</span>RongIMEmoji<span class="token punctuation">.</span><span class="token function">symbolToHTML</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; &quot;&lt;span class=&apos;rong-emoji-content&apos; name=&apos;[grinning]&apos;&gt;&#x1F601;&lt;/span&gt;&#x6D4B;&#x8BD5; Emoji&quot;</span>
</code></pre>
<h4 id="7&#x3001;support-adm-and-cmd">7&#x3001;Support ADM and CMD</h4>
<pre class="language-"><code class="lang-js"><span class="token comment">// requirejs</span>
require<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&apos;RongIMEmoji&apos;</span><span class="token punctuation">:</span> <span class="token string">&apos;http(s)://cdn.ronghub.com/RongEmoji-2.2.6.min&apos;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;RongIMEmoji&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>RongIMEmoji<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;\uf600test Emoji&quot;</span><span class="token punctuation">;</span>
    RongIMEmoji<span class="token punctuation">.</span><span class="token function">symbolToEmoji</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// =&gt; &quot;&#x1F600;test Emoji&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="dynamic-sticker-library">Dynamic sticker library</h2>
<p>Sticker package: includes a group of stickers.  Multiple sticker packages can exist simultaneously</p>
<p>Sticker: a specific sticker that must belong to a certain sticker package</p>
<p><strong> Compatibility </strong>: IE6+, Chrome, FireFox, Safari, iOS Safari, Android4.0+ browsers</p>
<h3 id="imort-sdk">Imort SDK</h3>
<pre class="language-"><code class="lang-js"><span class="token comment">// Normal</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;http[s]://cdn.ronghub.com/rong-sticker-1.0.0[.min].js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// RequieJS</span>
require<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  paths<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    RongSticker<span class="token punctuation">:</span> <span class="token string">&apos;http[s]://cdn.ronghub.com/rong-sticker-1.0.0[.min]&apos;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&apos;RongSticker&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>RongSticker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Please refer to https: https://github.com/rongcloud/websdk-demo/sticker/sticker.html</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="example">example</h3>
<p>Dynamic sticker: <code>https://rongcloud.github.io/websdk-demo/sticker/sticker.html</code></p>
<p>IM sticker reception and sending: <code>https://rongcloud.github.io/websdk-demo/sticker/message.html</code></p>
<p>RequireJS&#xFF1A;<code>https://rongcloud.github.io/websdk-demo/sticker/require.html</code></p>
<h3 id="interface">Interface</h3>
<h4 id="initialization">Initialization</h4>
<p><strong> API </strong>&#xFF1A;<code>RongSticker.init(config);</code></p>
<p><strong> config description </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">appkey</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">The unique identity of an App. Please move to the developer backgroundto create the App</td>
<td style="text-align:left">1.0.0</td>
</tr>
<tr>
<td style="text-align:left">url</td>
<td style="text-align:left">String</td>
<td style="text-align:left">No</td>
<td style="text-align:left">Service address of the sticker package</td>
<td style="text-align:left">1.0.0</td>
</tr>
<tr>
<td style="text-align:left">extensions</td>
<td style="text-align:left">Array</td>
<td style="text-align:left">No</td>
<td style="text-align:left">Extended message package</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> Example </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  appkey<span class="token punctuation">:</span> <span class="token string">&apos;appkey&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rongSticker <span class="token operator">=</span> RongSticker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong> Example of the extension package: </strong></p>
<pre class="language-"><code class="lang-js">  <span class="token keyword">var</span> extensions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token comment">// Sticker package Id</span>
  id<span class="token punctuation">:</span> <span class="token string">&quot;c60plBGwk2686yv4vmv4H9&quot;</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;Haibaobao&quot;</span><span class="token punctuation">,</span>
  desc<span class="token punctuation">:</span> <span class="token string">&quot;sticker &apos;Haibaobao&apos; made by RongCloud&quot;</span><span class="token punctuation">,</span>
  icon<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/icon_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
  poster<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/cover_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
  order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  author<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span><span class="token punctuation">,</span>
  copyright<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// Sticker list</span>
  stickers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">&quot;c60plBGwk2686yv4vmv4H9&quot;</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;Haibaobao&quot;</span><span class="token punctuation">,</span>
      desc<span class="token punctuation">:</span> <span class="token string">&quot;sticker &apos;Haibaobao&apos; made by RongCloud&quot;</span><span class="token punctuation">,</span>
      icon<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/icon_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
      poster<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/cover_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
      order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      author<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span><span class="token punctuation">,</span>
      copyright<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  appkey<span class="token punctuation">:</span> <span class="token string">&apos;appkey&apos;</span><span class="token punctuation">,</span>
  extensions<span class="token punctuation">:</span> extensions
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rongSticker <span class="token operator">=</span> RongSticker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="obtain-the-list-pf-sticker-packages">Obtain the list pf sticker packages</h4>
<p><strong> API </strong>&#xFF1A; <code>Package.getList(callback);</code></p>
<p><strong> Parameter description </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">callback</td>
<td style="text-align:left">Function</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Callback the function to for receiving data</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> Example </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  appkey<span class="token punctuation">:</span> <span class="token string">&apos;appkey&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rongSticker <span class="token operator">=</span> RongSticker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Package <span class="token operator">=</span> rongSticker<span class="token punctuation">.</span>Package<span class="token punctuation">;</span>
Package<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// result.packages =&gt; List of sticker packages</span>
  <span class="token comment">// error =&gt; Error message, error is null in case of normal return</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong> packages structure </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token string">&quot;c60plBGwk2686yv4vmv4H9&quot;</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;Haibaobao&quot;</span><span class="token punctuation">,</span>
      desc<span class="token punctuation">:</span> <span class="token string">&quot;sticker &apos;Haibaobao&apos; made by RongCloud&quot;</span><span class="token punctuation">,</span>
      icon<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/icon_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
      poster<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/cover_c60plBGwk2686yv4vmv4H9.png&quot;</span><span class="token punctuation">,</span>
      order<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      author<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span><span class="token punctuation">,</span>
      copyright<span class="token punctuation">:</span> <span class="token string">&quot;rongcloud&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<h4 id="obtain-the-list-pf-stickers">Obtain the list pf stickers</h4>
<p><strong> API </strong>&#xFF1A; <code>Sticker.getList(package, callback);</code></p>
<p><strong> package </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Sticker package Id</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> callback </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">callback</td>
<td style="text-align:left">Function</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Callback the function to for receiving data</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> Example </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  appkey<span class="token punctuation">:</span> <span class="token string">&apos;appkey&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rongSticker <span class="token operator">=</span> RongSticker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Sticker <span class="token operator">=</span> rongSticker<span class="token punctuation">.</span>Sticker<span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token keyword">package</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">&apos;c60plBGwk2686yv4vmv4H9&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sticker<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// result.stickers =&gt; List of stickers</span>
  <span class="token comment">// error =&gt; Error message, error is null in case of normal return</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong> stickers structure </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    packageId<span class="token punctuation">:</span> <span class="token string">&quot;c60plBGwk2686yv4vmv4H9&quot;</span>
    stickerId<span class="token punctuation">:</span> <span class="token string">&quot;d1PN1xTZ47p9nfMNWfGpyH&quot;</span><span class="token punctuation">,</span>
    desc<span class="token punctuation">:</span> <span class="token string">&quot;no problem&quot;</span><span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/image_d1PN1xTZ47p9nfMNWfGpyH.gif&quot;</span><span class="token punctuation">,</span>
    thumbUrl<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/thumb_d1PN1xTZ47p9nfMNWfGpyH.png&quot;</span><span class="token punctuation">,</span>
    height<span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">,</span>
    width<span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">,</span>
    order<span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<h4 id="get-a-sticker">Get a sticker</h4>
<p><strong> API </strong>&#xFF1A; <code>Sticker.get(stciker, callback);</code></p>
<p><strong> stciker </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">packageId</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Sticker package Id</td>
<td style="text-align:left">1.0.0</td>
</tr>
<tr>
<td style="text-align:left">stickerId</td>
<td style="text-align:left">String</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Sticker Id</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> callback </strong>&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Property Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Mandatory</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Version</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">callback</td>
<td style="text-align:left">Function</td>
<td style="text-align:left">Yes</td>
<td style="text-align:left">Callback the function to for receiving data</td>
<td style="text-align:left">1.0.0</td>
</tr>
</tbody>
</table>
<p><strong> Example </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  appkey<span class="token punctuation">:</span> <span class="token string">&apos;appkey&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> rongSticker <span class="token operator">=</span> RongSticker<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> Sticker <span class="token operator">=</span> rongSticker<span class="token punctuation">.</span>Sticker<span class="token punctuation">;</span>

<span class="token keyword">var</span> sticker <span class="token operator">=</span> <span class="token punctuation">{</span>
  packageId<span class="token punctuation">:</span> <span class="token string">&apos;c60plBGwk2686yv4vmv4H9&apos;</span><span class="token punctuation">,</span>
  stickerId<span class="token punctuation">:</span> <span class="token string">&apos;d1PN1xTZ47p9nfMNWfGpyH&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Sticker<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>sticker<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// sticker =&gt; sticker</span>
  <span class="token comment">// error =&gt; Error message, error is null in case of normal return</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong> sticker structure </strong>&#xFF1A;</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
  packageId<span class="token punctuation">:</span> <span class="token string">&quot;c60plBGwk2686yv4vmv4H9&quot;</span>
  stickerId<span class="token punctuation">:</span> <span class="token string">&quot;d1PN1xTZ47p9nfMNWfGpyH&quot;</span><span class="token punctuation">,</span>
  desc<span class="token punctuation">:</span> <span class="token string">&quot;no problem&quot;</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/image_d1PN1xTZ47p9nfMNWfGpyH.gif&quot;</span><span class="token punctuation">,</span>
  thumbUrl<span class="token punctuation">:</span> <span class="token string">&quot;http://sticker.ronghub.com/c60plBGwk2686yv4vmv4H9/thumb_d1PN1xTZ47p9nfMNWfGpyH.png&quot;</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">,</span>
  order<span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="voice-library">Voice library</h2>
<h3 id="voice-library-trackback-address">Voice library trackback address</h3>
<p>Obtain the official voice library (current version is 2.2.5) :</p>
<pre class="language-"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http(s)://cdn.ronghub.com/Libamr-2.2.5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre class="language-"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http(s)://cdn.ronghub.com/RongIMVoice-2.2.5.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>Code example: <code>https://rongcloud.github.io/websdk-demo/voice.html</code></p>
<h3 id="how-to-use-the-voice-library">How to use the voice library</h3>
<p>Range of support:</p>
<p>(1) Mainstream desktop browsers such as IE9+, Edge, Chrome 49+, Firefox 52+ and Safari</p>
<p>(2) Default  browser and Wechat browser for Android 4.4+ systems</p>
<p>(3) iOS Safari browser and Wechat browser</p>
<h4 id="1initialization">1.Initialization</h4>
<pre class="language-"><code class="lang-js">RongIMLib<span class="token punctuation">.</span>RongIMVoice<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="2play-audio">2.Play audio</h4>
<pre class="language-"><code class="lang-js"> <span class="token comment">/*
    Audio format: AMR in base64 format
    Complete audio sample : https://cdn.ronghub.com/voice-amr-base64.json
 */</span>
 <span class="token keyword">var</span> audioFile <span class="token operator">=</span> <span class="token string">&quot;IyFBTVIKLNEafAAeef/hgmeAH8AD...&quot;</span><span class="token punctuation">;</span>
 <span class="token comment">// Audio file length</span>
 <span class="token keyword">var</span> duration <span class="token operator">=</span> audioFile<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">1024</span><span class="token punctuation">;</span>
 <span class="token comment">// Preload</span>
 RongIMLib<span class="token punctuation">.</span>RongIMVoice<span class="token punctuation">.</span><span class="token function">preLoaded</span><span class="token punctuation">(</span>audioFile<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//Play sound</span>
    RongIMLib<span class="token punctuation">.</span>RongIMVoice<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>audioFile<span class="token punctuation">,</span> duration<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="3stop-playing">3.Stop playing</h4>
<pre class="language-"><code class="lang-js">RongIMLib<span class="token punctuation">.</span>RongIMVoice<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>audioFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="upload-plug-ins">Upload plug-ins</h2>
<p>Service of private file uploading</p>
<p>The service of private file accounting needs to expose uploadProcess, and the upload service in upload.js calls the global uploadProcess method.</p>
<p>See details in uploading Demo:</p>
<p><code>https://github.com/rongcloud/rongcloud-web-im-upload/tree/master/qiniu</code></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching &quot;<span class="search-query"></span>&quot;</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching &quot;<span class="search-query"></span>&quot;</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="rtc-sdk.html#" class="navigation navigation-next navigation-unique" aria-label="Next page: Open RTC Service">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"IMLib","description":"提供融云 Web 端开发的相关帮助和指南。","keywords":"融云 Web，Web 开发文档，Web SDK，即时通讯，im云服务","template":"doc.jade","level":"1.1.1","depth":2,"next":{"title":"Open RTC Service","level":"1.1.2","depth":2,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},"previous":{"title":"RTC SDK","level":"1.1","depth":1,"ref":"","articles":[{"title":"IMLib","level":"1.1.1","depth":2,"path":"imlib.md","ref":"./imlib.md","articles":[]},{"title":"Open RTC Service","level":"1.1.2","depth":2,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"API","level":"1.1.3","depth":2,"ref":"","articles":[{"title":"initialization","level":"1.1.3.1","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"EventHandler","level":"1.1.3.2","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Set parameter","level":"1.1.3.3","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Join","level":"1.1.3.4","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Leave","level":"1.1.3.5","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Get the local stream","level":"1.1.3.6","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Get the remote stream","level":"1.1.3.7","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Create a local video view","level":"1.1.3.8","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Create a remote video view","level":"1.1.3.9","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Turn the microphone off / on","level":"1.1.3.10","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Turn the local camera off / on","level":"1.1.3.11","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Turn remote sound off / on","level":"1.1.3.12","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Turn off the local media stream","level":"1.1.3.13","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Request whiteboard","level":"1.1.3.14","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Query whiteboard","level":"1.1.3.15","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Start screen sharing","level":"1.1.3.16","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]},{"title":"Stop screen sharing","level":"1.1.3.17","depth":3,"anchor":"#","path":"rtc-sdk.md","ref":"./rtc-sdk.md#","articles":[]}]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["prism","-highlight","codetabs","custom-html","expandable-chapters","-sharing","-fontsettings","livereload"],"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"livereload":{},"custom-html":{},"search":{},"codetabs":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"customHTML":{"js":"js/banner.js"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"style/website.css"}},"file":{"path":"imlib.md","mtime":"2018-11-08T07:12:30.659Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-11-08T07:12:37.976Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    

    
		<div class="rong-head">
			<div class="rong-head-box">
				<div class="rong-head-box-logo"></div>
			</div>
		<div>
	</div></div></body>
</html>

