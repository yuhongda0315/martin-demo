<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <title>Ws</title>
<script src="./RongIMLib-2.2.5.js"></script>
<!-- <script src="RongIMLib.js"></script> -->
<style type="text/css">
  body {
    font-size: 13px;
    background-color: black;
    color: white;
  }

  #content {
    float: left;
    border-right: 1px solid white;
    margin-right: 20px;
    padding-right: 20px;
  }
</style>


</head>

<body height="600px" width="600px">
  Appkey <input type="text" id='appId'> | 
  Token: <input type="text" id="tokenId"> |
  Navi: <input type="text" id='naviId'> | 
  <input type="button" value='Connect' id='connectId'>
  <hr/>
  <div id="content"></div>
  <script type="text/javascript">

   var $ = function(id){
    return document.getElementById(id);
   };

   var showLog = function(content){
     $('content').innerHTML += content + '<br/>'
   };
    function init() {
      var appkey =  $('appId').value,
          token = $('tokenId').value,
          navi = $('naviId').value || 'nav.cn.ronghub.com';

      // if (!appkey) {
      //   console.error('appkey is empty.');
      //   return;
      // }

      // if (!token) {
      //   console.error('token is empty.');
      //   return;
      // }
      // RongIMClient.init("8luwapkvucoil");
      // var token = "sTgQWTjHHWtdjnrFMDpMApA0Eersi27R5vdF4lbvFQGcn4aHnLlbCmbh0t3d2XjHpzE2W1IUYQY=";

      // RongIMClient.init("pkfcgjstfqj58");

      var token ='IMx5KLtfOjuiCsOX7PoYvvMO39BOzAfIcFeKELHdMDEWOr6Fo8DXnM54f83tzM3ui9ZXunl/1CQm/UsopE1e/Q=='
      var appkey = '8brlm7urp1750';
      RongIMClient.init(appkey, null, {navi: '120.92.9.229:80'});
      RongIMClient.setConnectionStatusListener({
        onChanged: function(status) {
          switch (status) {
            case RongIMLib.ConnectionStatus.CONNECTED:
              showLog("链接成功!");
              break;
            case RongIMLib.ConnectionStatus.CONNECTING:
              showLog("正在链接!");
              break;
              //重新链接
            case RongIMLib.ConnectionStatus.RECONNECT:
              showLog("重新链接!");
              break;
            case RongIMLib.ConnectionStatus.OTHER_DEVICE_LOGIN:
              showLog("其他设备登录!");
              break;
            case RongIMLib.ConnectionStatus.CLOSURE:
              showLog("连接关闭!");
              break;
            case RongIMLib.ConnectionStatus.DISCONNECTED:
              showLog("连接断开!");
              break;
            case RongIMLib.ConnectionStatus.LOGOUT:
              //用户已被封禁
            case RongIMLib.ConnectionStatus.BLOCK:
              break;
            case RongIMLib.ConnectionStatus.NETWORK_UNAVAILABLE:
              showLog('网络不可用');
              break;
          }
        }
      });
      RongIMClient.setOnReceiveMessageListener({
        onReceived: function(message) {
            showLog('------华丽分割线------');
            showLog(JSON.stringify(message));
        }
      });
      RongIMClient.connect(token, {
        onSuccess: function(userId) {
          showLog("Login successfully." + userId);
        },
        onTokenIncorrect: function() {
          showLog('token无效');
        },
        onError:function(errorCode){
              var info = '';
              switch (errorCode) {
                case RongIMLib.ErrorCode.TIMEOUT:
                  info = '超时';
                  break;
                case RongIMLib.ErrorCode.UNKNOWN_ERROR:
                  info = '未知错误';
                  break;
                case RongIMLib.ErrorCode.UNACCEPTABLE_PaROTOCOL_VERSION:
                  info = '不可接受的协议版本';
                  break;
                case RongIMLib.ErrorCode.IDENTIFIER_REJECTED:
                  info = 'appkey不正确';
                  break;
                case RongIMLib.ErrorCode.SERVER_UNAVAILABLE:
                  info = '服务器不可用';
                  break;
                case RongIMLib.ErrorCode.TOKEN_INCORRECT:
                  info = 'token无效';
                  break;
              }
              showLog(errorCode);
            }
      });
    }

    $('connectId').onclick = function(){
        init();
    };
  </script>
</body>

</html>
