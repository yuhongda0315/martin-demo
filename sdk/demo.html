<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <title>Demo</title>
</head>
<body>
</body>
<script>
    /*
      1、src/imclient.ts 中所有 API onError
      2、src/util/util.ts : CheckParam.prototype.checkout 
    */


    /*
      默认向控制台输出，可重写
    */
    var showError = function(info){
        console.log(JSON.stringify(info));
    };
    var RongIMClient = {
        showError: showError
    }

    var logFactroy = {
        20604:{
          /*被调用的函数名称*/
          funcName: '',
          /*错误码*/
          code: '22406',
          /*错误信息*/
          msg: '发送频率过快',
          /*错误信息描述，文档地址、文字性描述或错误解决方法*/
          desc: 'https://developer.rongcloud.cn/ticket/info/9Q3L6vRKd1cLS7rycA==?type=1'
        }
    };

    // 输出 log 开关
    var showErrorInfo = true;
    /*
      funcName: 被调用的函数名称（必选）
      code: 错误码 （必选）
      desc: 问题描述 （可选）

      错误信息:
        
        1、已定义 logFactroy

        2、未定义直接输出 params

    */
    var logger = function(params){
      
      var {funcName, code, desc} = params;

      var errorInfo = logFactroy[code] || params;
      errorInfo.funcName = funcName;
      showErrorInfo && RongIMClient.showError(errorInfo);
    };

    var params = {
        code: 20604,
        funcName: 'sendMessage'
    };

    logger(params);
    /*
      {"funcName":"sendMessage","code":"22406","msg":"发送频率过快","desc":"https://developer.rongcloud.cn/ticket/info/9Q3L6vRKd1cLS7rycA==?type=1"}
    */
</script>
</html>
