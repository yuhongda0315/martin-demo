<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> CallLib </title>
  <!-- <link rel="stylesheet" href="../res/rongcloud.css"> -->
  <link rel="stylesheet" href="style/main.css?123">
</head>
<body>
  <!-- <a href="https://github.com/rongcloud/websdk-demo/blob/master/calllib/blink/private.html" class="get-source">获取源码</a> -->
  <div class="rong-container"></div>
   <div class="rong-toolbar">
      <button onclick="callVideo()" class="rong-callvideo"></button>
      <button onclick="callAudio()" class="rong-callaudio"></button>
      
      <button onclick="acceptVideo()" class="rong-accept"></button>
      <button onclick="hungup()" class="rong-hungup"></button>
      
      <button onclick="mute()" class="rong-mute"></button>
      <button onclick="unmute()" class="rong-unmute"></button>

      <button onclick="videoToAudio()" class="rong-disable-video"></button>
      <button onclick="audioToVideo()" class="rong-disable-audio"></button>
  </div>

  <div class="rong-warns">
    <p>兼容说明：</p>
    <ul>
      <li>操作系统: macOS 10.13.3+ 、Win7+</li>
      <li>浏览器: Chrome 57+</li>
    </ul>
    <p>站点要求：</p>
    <ul>
      <li>HTTPS 站点或 localhost, 端口不限</li>
    </ul>
    <button onclick="pull()">上拉</button> <input type="text" id="pull"><br>
    <button onclick="transfer()">转发</button> <input type="text" id="transfer"><br>
    <button onclick="updateSubscription()">修改订阅关系</button> <input type="text" id="update_subscription" value="martin3,martin1"><br>
  </div>
</body>
  <script src="http://192.168.0.8:8686/websdk-demo/lib/jquery-3.1.1.js"></script>
  <script src="./RongIMLib-2.3.1-revise.js"></script>
  <script src="./lib/providers/message/sendmsg.js?123123123"></script>
  <script src="./lib/calllib.js?13333"></script>
  <script src="./init.js"></script>
  <script src="./config.js"></script>
  <script>
    
var tools = {
  //仅支持类选择器和 Id 选择器
  getDom: function (selector) {
    var selectorMap = {
      class: function (selector) {
        return document.getElementsByClassName(selector);
      },
      id: function (selector) {
        return document.getElementById(selector);
      }
    };
    var isClass = (selector.indexOf('.') == 0);
    var type = isClass ? 'class' : 'id';
    var name = selector;
    if(isClass){
      name = name.slice(1)
    }
    return selectorMap[type](name);
  },
  toggleClass: function (node, name) {
    node.className = name;
  },
  createDom: function (name, attrs) {
    attrs = attrs || {};
    var node = document.createElement(name);
    for (var key in attrs) {
      node[key] = attrs[key];
    }
    return node;
  },
  noop: function () { }
};
  </script>
  <script>
    var user = config.private3;
    var params = {
      appKey: config.appKey,
      conversationType: 1,
      userId: user.id,
      token: user.token
    };

    var callbacks = {
        getInstance : function(instance){
           var toolbar = tools.getDom('.rong-toolbar')[0];
           toolbar.style.display = 'block';
        },
        getCurrentUser : function(userInfo){
            console.log(userInfo.userId);
        }
    };

    IMLib.init(params, callbacks);
  </script>
  <script src="./demo.js"></script>

</html> 